Vue.component('PhoenixBanner', {
  template: `
<div class="xl_bannar 11">
  <div class="logo-img-box">
    <div class="logoBox">
      <img
        class="logo-img"
        :src="bannerInfo.stop_logo_img_url"
        alt="菲尼克斯logo"
      />
      <img
        src="images/pCode.jpg"
        alt="菲尼克斯二维码"
        class="pCode"
      >
      <div style="width: 140px;text-align: center;position: absolute;top: 138px;font-size: 10px;">24小时技术支持</div>
    </div>
    <img
      class="logo-img logo-img2"
      src="images/logo-2.png?v=20210226"
      alt=""
      @click="toIndex()"
    />
    <!-- 关注按钮 -->
    <z-button
      :type="isFollowed?'':'primary'"
      size="medium"
      class="z-btn--phoenix"
      @click="handleFollow"
    ><i class="iconfont icondianzan-38"></i>{{isFollowed?'取消关注':'关注'}}</z-button>
    <!-- 关注按钮 end -->
  </div>
  <div class="xl_main_container">
    <!-- 探照灯效果 -->
    <div class="svg-box">
      <div class="text-box">
        <div class="text-box2">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </div>
      <svg
        height="0"
        width="0"
      >
        <defs>
          <clipPath id="svgTextPath">
            <path
              class="cls-1"
              d="M-1227.43,2023.08v102.1a7.35,7.35,0,0,0,.88,3.08l.42.81a1.25,1.25,0,0,0,.16.24l2.12,2a8.25,8.25,0,0,0,4.81,1.44h99a8.67,8.67,0,0,0,5.19-1.56c.87-.52.46-.37,1.19-1.11,1.57-1.62,2.35-3.58,2.35-6.71v-98.65c0-3.52-1.43-6.58-4.14-8a6.61,6.61,0,0,0-3.11-1h-101.77a7.06,7.06,0,0,0-4.82,2.42,7.69,7.69,0,0,0-2.26,5Zm18,6c1.58-.41,14.85-.2,17.56-.2,17.07,0,16.66-1.22,16.66,9.95,0,9,1.16,9.26-4.63,13.18s-9.25,11.1-6.91,18.26c3.07,9.4,9.82,8.72,11.31,15.21.51,2.23.23,23,.23,26.3,0,8.09-4.68,7.74-10.07,7.74h-17.62c-2.79,0-5.83.33-8-.91a6.23,6.23,0,0,1-3.25-5.67l0-70.82c0-6.09-1-11.57,4.69-13Zm47.55-.2c4.39-.45,9.71.87,13.4,2.29,10.19,3.93,19.61,14,22.61,25.31,6,22.75-11.41,43.94-31.51,45.83-2.5.23-5.22.43-7.12-.78s-2-2.94-2.07-5.89c-.08-7.28-1.2-12.18,4.32-15.82,10-6.57,11.1-20.41.08-28-5.18-3.6-4.4-4-4.4-11.62,0-6.37-1.19-10.67,4.69-11.27Zm-10,29a8,8,0,0,1,8.86,6.72,8,8,0,0,1-6.6,9,8,8,0,0,1-9.1-6.62A7.91,7.91,0,0,1-1171.82,2057.94Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-988.48,2041.69c0,5.72.4,8.89,2.8,14.15a23.2,23.2,0,0,0,6.19,8.15c6.64,5.19,12.29,6.84,21.64,6.84h48.09c.38,0,.49-.11.49-.49v-12.68c0-.38-.11-.49-.49-.49h-22.07c0-8.87-.65-7.58,2.3-7.58,3.41,0,19.12-.23,19.93.16v-13.33h-22.23V2029h22.07c.38,0,.49-.12.49-.5v-12.84h-54.18a26,26,0,0,0-5.54.72,26,26,0,0,0-5.87,2,33,33,0,0,0-4.8,3.27,24.16,24.16,0,0,0-6.73,9.24,29.43,29.43,0,0,0-2.09,10.76Zm28.89-10c5.16,0,9.35,5.2,9.35,11.6s-4.19,11.61-9.35,11.61-9.34-5.2-9.34-11.61S-964.75,2031.65-959.59,2031.65Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-831,2105.25c0,6.22,1.65,10.09,4.09,14.52a16.31,16.31,0,0,0,1.49,2.14,32.75,32.75,0,0,0,7.45,7,9.41,9.41,0,0,0,1.17.64,31.11,31.11,0,0,0,23.68,3.33,18.61,18.61,0,0,0,3.27-1.18l3.15-1.46v-15.15c-.94.25-3.7,3.46-8.07,3.46-2.86,0-5.17,0-7.85-1.2a14.18,14.18,0,0,1-4.36-2.89l-2.45-3.15c-2.53-4.91-1.91-11.17,1.11-14.88a14.92,14.92,0,0,1,2.42-2.35,11.81,11.81,0,0,1,6.19-1.88h18.45v40.51h20.09V2099c0-2.88-.36-2.4,0-6.75h12.36c.7,0,1.31.17,1.31-.5v-14.33H-801.9c-7.33,0-13.59,1.67-19.25,5.62-5,3.5-8.12,9.57-9.28,15.58A37.09,37.09,0,0,0-831,2105.25Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-863.16,2038.56a9,9,0,0,1-2.1-1.86l-20.25-19.27a11.71,11.71,0,0,0-2.2-1.75h-15.8v24.7c0,2.23-.34,29.77,0,30.26s5.2.2,6,.2c4.11,0,8.24,0,12.35,0,1.56,0,1.85.37,1.83-1.14l0-21.92c.72.19.57.4,1,.84l9,8.81.09.08.24.24,1.19,1.12.08.09.08.08a.6.6,0,0,0,.08.08l8.4,8.24.09.08c4.56,4.22,1.68,3.39,9,3.39,2.5,0,8.62.1,10.86-.06.22,0,.34.19.45-.33,0,0,0-.08,0-.1l.05-54.67h-20.26Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-992.93,2132.75h19.76v-23.22a23,23,0,0,1,2.49,2.46l2.56,2.55a.6.6,0,0,0,.08.08l2.55,2.55.08.09,5.23,5.31c.34.37.43.29.81.67s.31.48.66.82.37.19.79.69l2.21,2.24c.56.44.72.85,1.39,1.41l1.5,1.47c.6.55,2.54,2.88,3,2.88h16.63v-55.33h-20.58V2101a45.54,45.54,0,0,1-4-3.91l-17.78-17.79c-.48-.47-1.52-1.73-2.11-1.84h-15.8V2130a14.48,14.48,0,0,0,.06,1.75C-993.28,2132.45-993.53,2132.75-992.93,2132.75Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-1058,2103.93c0,6.94.84,10.67,3.9,16.2a27.67,27.67,0,0,0,4.06,5.31,26.68,26.68,0,0,0,4.56,3.69c11.21,7.45,29.37,6,38.49-3.17a24.55,24.55,0,0,0,6.08-8.58,31.46,31.46,0,0,0,.06-24.48,26.73,26.73,0,0,0-4.19-6.68,9.72,9.72,0,0,0-.85-1l-4-3.46c-1.45-1-2-1.23-3.39-2a8.28,8.28,0,0,0-1.24-.58,34.5,34.5,0,0,0-26-.7l-2.38,1.08a21.48,21.48,0,0,0-2.3,1.32,28.71,28.71,0,0,0-7.44,6.89,28.53,28.53,0,0,0-5.41,16.16Zm29.73-10.8c5.25,0,9.51,5.4,9.51,12.07s-4.26,12.06-9.51,12.06-9.52-5.4-9.52-12.06S-1033.51,2093.13-1028.25,2093.13Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-1051.06,2070.34c0,.38.11.49.49.49h19.11c.38,0,.49-.11.49-.49v-19.6h17v20.09h20.09v-55.16H-1014v18.6h-17v-18.6h-20.09Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-893.63,2132.75h20.26c.66,0,2.11-4.31,2.37-5l1.52-3.91c.16-.51.31-1.09.89-1.09h16.79c.61,0,.82,1.13,1.25,2.21s.64,1.61,1,2.63c.48,1.38,1.76,4,2,5.2h20.58l-22.56-55.33h-21.57l-14.12,34.47c-.5,1.14-.94,2.18-1.41,3.36l-4.31,10.35c-.48,1.21-2.71,6.27-2.73,7.15Zm33.38-36.48,2.16,6.84,2.17,6.84h-8.67l2.17-6.84Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-791.85,2042.51a30,30,0,0,1-2.57,3.53c-.27.36-.36.49-.65.84l-1.1,1.52c-1.87,2.77-4.06,5.29-6,8-1.46,2.1-2.88,4.24-4.49,6.21l-3.25,4.49c-.64.89-2.31,2.73-2.57,3.69a2.32,2.32,0,0,1,.86-.07c4.5,0,19.22.33,21.89,0,.85-.1.7-.37,1.23-1.19s.81-1.2,1.23-1.9l4.84-7.67c.52-.88,1.85-3.35,2.56-3.86.62,1.17,8.29,13.52,9.07,14.32a1.23,1.23,0,0,0,1,.33c3.72,0,19.68.21,21.65,0,.4-.05.27.09.75-.13-.12-.34-.06-.17-.24-.42l-6.12-8.37c-.27-.4-.34-.47-.63-.85l-4.54-6.17c-.45-.65-.89-1.16-1.31-1.81l-2.57-3.53c-.44-.64-.82-1.07-1.27-1.69l-1-1.32c-.21-.27-.14-.18-.35-.48-.58-.86-2.37-2.86-2.56-3.69l5.08-6.61c.46-.62.88-1,1.29-1.67a3.65,3.65,0,0,1,.66-.82c.27-.32.35-.52.61-.87l6.39-8.27c1.51-1.71,2.7-3.62,4.15-5.4l.07-.09.08-.1,2.09-2.84h-23.06a5.11,5.11,0,0,1-1,1.59l-1.77,2.36c-1.37,1.75-5.51,8.1-6.59,8.89-.17-.66-3.93-5.48-4.54-6.33-.85-1.18-4.26-5.45-4.51-6.51h-23.22l3.78,4.94c.23.33.35.52.63.86l3.23,4.17c.9,1.18,1.71,2.22,2.57,3.37l9,11.76A12.52,12.52,0,0,1-791.85,2042.51Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-1104.58,2070.34c0,.54.34.45,1.8.5l18-.06c.38-.1.4.19.4-.44v-15.48c6.08,0,11.18.5,16.83-1.79a31.91,31.91,0,0,0,5.06-2.68l2.78-2.32a15.91,15.91,0,0,0,2.41-2.86,18.21,18.21,0,0,0,2.77-14.59,17.46,17.46,0,0,0-2.94-6.95,18.1,18.1,0,0,0-2.33-2.61c-2.41-2.44-6.51-4.14-9.85-4.8a21.53,21.53,0,0,0-4.35-.59h-30.63v54.67Zm20.28-28.8v-12.68h3.56a6.79,6.79,0,0,1,4.71,1.68,5.72,5.72,0,0,1,1.89,4.5,6.17,6.17,0,0,1-1.89,4.72,6.72,6.72,0,0,1-4.84,1.78Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-1107.71,2104.1a28.47,28.47,0,0,0,1.71,11.14,28.73,28.73,0,0,0,2.41,5c.94,1.56,1.48,2.05,2.33,3.27l3.32,3.27a6,6,0,0,1,.57.42c.38.32.66.47,1,.76a17.31,17.31,0,0,0,2.28,1.51c6.07,3.11,10.26,4.45,18.28,4.45,9.69,0,11.7-2.52,14.32-3.13v-16.14a3.33,3.33,0,0,0-1.36.61c-5.33,3-12.8,4.54-18.23.71l-2-1.67a13,13,0,0,1-2.68-14.5,11.25,11.25,0,0,1,1.2-2.09,10.68,10.68,0,0,1,2.41-2.7c5.31-4.7,14-3.85,18.93-.24a3.76,3.76,0,0,0,1.2.78l.09-15.94c-.12-.74-.55-.8-1.1-1l-1.53-.61c-5.1-1.92-15.63-2.38-21.11-.82a29.49,29.49,0,0,0-13.44,7.63,5.8,5.8,0,0,0-.86.79,40.32,40.32,0,0,0-3.77,5c-.47.86-.84,1.52-1.26,2.36A27.26,27.26,0,0,0-1107.71,2104.1Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-930.84,2079.23c0,4-.18,8,.12,12a2.45,2.45,0,0,1-.12,1h14v40c0,.38.12.49.5.49h19.1c.38,0,.5-.11.5-.49v-40h13.5v-14.82h-47.59A4,4,0,0,1-930.84,2079.23Z"
              transform="translate(1227.43 -2015.67)"
            />
            <path
              class="cls-1"
              d="M-836.32,2070.83h20.75c.75,0-.12-.2.83,0v-55.16h-21.58Z"
              transform="translate(1227.43 -2015.67)"
            />
          </clipPath>
        </defs>
      </svg>
    </div>
    <div class="brand-banner">
      <div
        class="search-box"
        v-cloak
      >
        <div class="search-input">
          <input
            v-model="keyword"
            placeholder="请输入产品名称/品牌/订货号/型号/规格参数"
            @keyup.enter="searchClick"
          />
          <z-button
            type="primary"
            full
            class="search-btn"
            @click="searchClick"
          >
            <img
              src="images/icon-search.png?v=20210226"
              alt=""
            />
            搜索
          </z-button>
        </div>
        <div class="ep-btn">
          <z-button
            type="important"
            full
            class="ep-btn-item"
            @click="epClick"
          >
            <img
              src="images/icon-list.png?v=20210226"
              alt=""
            />
            专属选型
          </z-button>
        </div>
      </div>
    </div>
    <img
      class="logo-txt2"
      :src="bannerInfo.sbrand_logo_img_url"
      alt=""
      v-if="bannerInfo.sbrand_logo_img_url"
    />
  </div>
  <img
    class="man-img"
    :src="bannerInfo.slogan_img_url"
    alt=""
  >
</div>`,
  props: {
    bannerInfo: {
      type: Object,
      default: () => ({})
    },
    brandId: {
      type: String,
      default: ''
    }
  },
  data() {
    return {
      // 是否已关注
      isFollowed: false,
      keyword: '',

    }
  },
  created() {
    this.isFollow()
  },
  watch: {
    bannerInfo(value, oldValue) {
      if (value) {
        this.setSvgPath()


      }
    }
  },
  methods: {
    tabAni(idx) {
      let time = idx == 1 ? 5 : (idx == 2 ? 8 : 12)
      let dom = document.querySelector('.text-box2')
      dom.classList.remove('ani1')
      dom.classList.remove('ani2')
      dom.classList.remove('ani3')
      dom.classList.add('ani' + idx)
      setTimeout(() => {
        if (idx == 3) {
          idx = 1;
        } else {
          idx++
        }
        this.tabAni(idx)
      }, time * 1000)
    },
    //写入svg探照灯效果
    setSvgPath() {
      let dom = document.getElementById('svgTextPath')
      let pathList = JSON.parse(this.bannerInfo.clipPath)
      let cdom = ''
      for (let i = 0; i < pathList.length; i++) {
        cdom += `<path class="cls-1" d="${pathList[i]}" transform="translate(1227.43 -2015.67)"/>`
      }

      dom.innerHTML = cdom
      // setTimeout(() => {move()},1000)
      this.tabAni(1)
    },
    // 关注 
    isFollow() {
      apiPhoenix.isFollow(this.brandId).then(response => {
        // if (response) {
        this.isFollowed = response
        // }
      })
    },
    // 关注 
    follow() {
      apiPhoenix.follow(this.brandId).then(response => {
        if (response) {
          this.isFollowed = true
        }
      })
    },
    // 取消关注
    cancelFollow() {
      apiPhoenix.cancelFollow(this.brandId).then(response => {
        if (response) {
          this.isFollowed = false
        }
      })
    },
    handleFollow() {
      if (this.isFollowed) {
        this.cancelFollow()
      } else {
        this.follow()
      }
    },
    searchClick() {
      if (this.keyword)
        window.open('/product/search.html?from=search&brand=' + this.bannerInfo.sbrand_name + '&tag=' + this.keyword)
    },
    epClick() {
      let params = this.bannerInfo.sep_path
      window.open('/product/epselect/index.html?params=' + params)
    },
  }
})